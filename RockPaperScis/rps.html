<!DOCTYPE html>
<html>
<head>
	<title>Rock Paper Scissors 1.0</title>
</head>


<body>

	<script>
		
		//GENERATE CPU MOVE
		function generateCpuMove() {

			let dice = Math.floor(Math.random()*3);
			let move = 'ROCK';

			if(dice==0){ move = 'PAPER'; }
			if(dice==1){ move = 'SCISSORS';}

			return move;
		}

		//PROCESS MATCH OUTCOME 
		function fight(CPU, user) {

			let out = "";

			//OUTCOME > CPU PLAYS SCISSORS
			if(CPU == 'SCISSORS'){
				switch(user){
					case 'SCISSORS': return 'draw'; break;
					case 'ROCK': return 'user';	break;
					default: return 'CPU'; break;
				}
			}

			//OUTOME > CPU PLAYS ROCK
			if(CPU == 'ROCK'){
				switch(user){
					case 'SCISSORS': return 'CPU'; break;
					case 'ROCK': return 'draw'; break;
					default: return 'user'; break;
				}
			}

			//OUTCOME > CPU PLAYS PAPER
			if(CPU == 'PAPER') {
				switch(user){
					case 'SCISSORS': return 'user'; break;
					case 'ROCK': return 'CPU';	break;
					default: return 'draw'; break;
		}}}

		//RUN 5 MATCHES & GENERATE OUTCOME
		function playGame() {

			let userWinCount = 0;
			let cpuWinCount =0;

			//PLAY 3 GAMES
			for(i=0;i<3;i++){

				//GET CPU AND USER'S MOVE
				let CPU = generateCpuMove();
				let user = prompt('Rock (R) || Paper (P) || Scissors (S)').toUpperCase();
				
				//PROCESS RESULT
				let matchResult = fight(CPU, user);
				let matchMsg="";

				//PRINT MATCH RESULT
				switch(matchResult) {
					case 'draw':matchMsg= "Draw! CPU ALSO used "+CPU; break;
					case 'user':matchMsg='Victory! '+user+" beats "+CPU;break;
					case 'CPU':matchMsg= "LOSS! "+CPU+" beats "+user;break;
				}
				alert(matchMsg);

				//UPDATE SCORE 
				if(matchResult=='user'){userWinCount +=1;}
				if(matchResult=='CPU'){cpuWinCount +=1;}
			}

			//OUTPUT GAME SCORE
			let scoreMsg = "HUMANS: "+userWinCount+"\nCPU: "+cpuWinCount;
			alert(scoreMsg);

			//OUTPUT GAME RESULT
			if(userWinCount>cpuWinCount){
				return "OMG OMG OMG THE HUMAN WINS";
			}
			else if(userWinCount == cpuWinCount){
				return "EQUALITY! NEITHER IS BETTER, HUMANS = COMPUTER!";
			}
			return "YOU LOST... HUMANS WILL BE ENSLAVED BY COMPUTERS";
		}

		//INSTANTIATE GAME
		let gameResult = playGame();
		alert(gameResult);
		
	</script>
</body>
</html>